{"version":3,"sources":["draw_functions.js","jk.js","generator.js","Test.js","index.js"],"names":["draw_rect_signal","ctx","x","y","w","h","signal","delta_x","length","level","level_last","beginPath","moveTo","i","lvl","parseInt","lineTo","stroke","jk","iobj","obj","r","s","c","inv_r","inv_s","inv_c","q","j","k","jk_array","inv_obj","ans","q1","push","Rand_of_var","variant","symbols","a","Math","abs","sin","floor","JK_now","this","signal_c","signal_j","signal_k","signal_r","signal_s","inv_C","inv_R","inv_S","order","n","super_const","slice","delete_from_signal","pos","tmp","Number","Rand_of_var3","splice","rand","VariantForm","changeVariant","className","type","value","onChange","min","AnswerForm","answer","changeValue","submitAnswer","placeholder","onClick","Test","useState","setValue","setAnswer","random","setVariant","variantMessage","setVariantMessage","generate","useEffect","cnv","document","querySelector","width","parentNode","offsetWidth","height","offsetHeight","getContext","size","sig","strokeStyle","add_c","toLowerCase","fillText","clearRect","padding","inv","rect","textAlign","textBaseline","orderstr","split","join","s_pos","indexOf","r_pos","c_pos","arc","operation_preserve","globalCompositeOperation","PI","fill","draw_JK","cx","setLineDash","id","e","target","console","log","toString","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.746f656d.chunk.js","sourcesContent":["// draws rectangular signal\r\n// ctx is 2d context,\r\n// x, y, w, h -- coords and size,\r\n// signal -- array of 0s and 1s\r\nexport function draw_rect_signal(ctx, x, y, w, h, signal) {\r\n    var delta_x = w / signal.length;\r\n    var level = [y + h, y];\r\n    var level_last = 0;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, level[0]);\r\n    for (var i = 0; i < signal.length; i++) {\r\n        var lvl = parseInt(signal[i]);\r\n        ctx.lineTo(x, level[level_last]);\r\n        ctx.lineTo(x, level[lvl]);\r\n        x += delta_x;\r\n        level_last = lvl;\r\n    }\r\n    ctx.lineTo(x, level[level_last])\r\n    ctx.stroke();\r\n}\r\n\r\n// draws JK-trigger\r\n// ctx is 2d context,\r\n// x, y, w, h -- coords and size,\r\n// padding -- length of lines left and right\r\n// inv -- 3-elements boolean array:\r\n//  [s, c, r],\r\n//  each elements tells wether this input should be inverted\r\n//  TODO fix lines inside circle\r\nexport function draw_JK(ctx, x, y, w, h, padding, inv, order=\"SCJKR\") {\r\n    ctx.beginPath();\r\n    ctx.rect(x, y,        w,    h);\r\n    ctx.rect(x, y + h/5,  w/2,  3*h/5);\r\n    ctx.moveTo(x + w/2, y);\r\n    ctx.lineTo(x + w/2, y+h);\r\n    ctx.textAlign = \"center\";\r\n    ctx.textBaseline = \"middle\";\r\n    let orderstr = \" \" + order.split(\"\").join(\" \") + \" \";\r\n    let s_pos = orderstr.indexOf(\"S\");\r\n    let r_pos = orderstr.indexOf(\"R\");\r\n    let c_pos = orderstr.indexOf(\"C\");\r\n    for (var i = 1; i < 10; i+=2) {\r\n        ctx.moveTo(x-padding,   y+i*h/10);\r\n        ctx.lineTo(x,           y+i*h/10);\r\n        ctx.fillText(orderstr[i], x+padding, y+i*h/10)\r\n    }\r\n    if (inv[1]) { // drawing clock signal direction, up or down\r\n        ctx.moveTo(x - padding / 2, y + c_pos*h/10 - padding/2);\r\n        ctx.lineTo(x + padding / 2, y + c_pos*h/10 + padding/2);\r\n    }\r\n    else {\r\n        ctx.moveTo(x - padding / 2, y + c_pos*h/10 + padding/2);\r\n        ctx.lineTo(x + padding / 2, y + c_pos*h/10 - padding/2);\r\n    }\r\n    if (inv[0]) {\r\n        ctx.moveTo(x + padding/2, y + s_pos*h/10);\r\n        ctx.arc(x, y + s_pos*h/10, padding/2, 0, 7);\r\n    }\r\n    if (inv[2]) {\r\n        ctx.moveTo(x + padding/2, y + r_pos*h/10);\r\n        ctx.arc(x, y + r_pos*h/10, padding/2, 0, 7);\r\n    }\r\n    ctx.stroke();\r\n    let operation_preserve = ctx.globalCompositeOperation;\r\n    ctx.globalCompositeOperation = 'destination-out';\r\n    ctx.beginPath();\r\n    if (inv[0]) {\r\n        ctx.moveTo(x, y + s_pos*h/10);\r\n        ctx.arc(x, y + s_pos * h/10, padding/2-1, 0, Math.PI * 2);\r\n    }\r\n    if (inv[2]) {\r\n        ctx.moveTo(x, y + r_pos*h/10);\r\n        ctx.arc(x, y + r_pos * h/10, padding/2-1, 0, Math.PI * 2);\r\n    }\r\n    ctx.fill();\r\n    ctx.globalCompositeOperation = operation_preserve;\r\n}\r\n\r\n","// modelling jk-trigger work\r\n\r\n// input: object, where there are variables\r\n// q as current state (0 or 1),\r\n// j, k, r, s as inputs (0 or 1),\r\n// c -- clock pulse (-1 is down, 0 is none, 1 is up),\r\n// inv_r, inv_s, inv_c -- boolean, optional -- if r, s, c should be inverted\r\n// returns new state (q) of trigger\r\nfunction jk(iobj) {\r\n    let obj = {\"r\": iobj.r, \"s\": iobj.s, \"c\": iobj.c};\r\n    if (iobj.inv_r) obj.r = !iobj.r;\r\n    if (iobj.inv_s) obj.s = !iobj.s;\r\n    if (iobj.inv_c) obj.c = -iobj.c;\r\n    else obj.c = iobj.c;\r\n    obj.q = iobj.q;\r\n    obj.j = iobj.j;\r\n    obj.k = iobj.k;\r\n    if (obj.s && !obj.r) {\r\n        //console.log(\"s and not r\");\r\n        //console.log(\"s = \" + obj.s + \", r = \" + obj.r);\r\n        return 1;\r\n    }\r\n    if (obj.r && !obj.s) {\r\n        //console.log(\"r and not s\");\r\n        return 0;\r\n    }\r\n    if (!!obj.r && !!obj.s) {\r\n        //console.log(\"r and s\");\r\n        //console.log(\"r = \" + obj.r + \", s = \" + obj.s);\r\n        //console.log(typeof(obj.r));\r\n        return 1;\r\n    }\r\n    if (obj.c < 1) {\r\n        //console.log(\"no clock\");\r\n        return obj.q;\r\n    }\r\n    if (!obj.j && !obj.k) {\r\n        //console.log(\"storage\");\r\n        return obj.q;\r\n    }\r\n    if (obj.j && obj.k) {\r\n        //console.log(\"counter\");\r\n        return obj.q? 0 : 1; // \"not\" but in integer\r\n    }\r\n    if (obj.j) {\r\n        //console.log(\"set 1 with j\");\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\n// processes signal with jk-trigger\r\n// c array should be N+1 size, 0/1-array, states (pulses computed automatically), \r\n// j, k, r, s should be N-size,\r\n// inv_obj sould be something like {\"r\": true, \"s\": true, \"c\": false}\r\n// it is not necessary to list inputs not to invert,\r\n// but not forbidden,\r\n// q is initial state\r\n// returns 0/1 array of stares\r\nexport function jk_array(j, k, r, s, c, q, inv_obj) {\r\n    var ans = [];\r\n    let q1 = q * 1;\r\n    for (var i = 0; i < j.length; i++) {\r\n        let obj = {\r\n            \"r\": r[i] * 1,\r\n            \"s\": s[i] * 1,\r\n            \"j\": j[i] * 1,\r\n            \"k\": k[i] * 1,\r\n            \"c\": c[i+1] - c[i],\r\n            \"inv_r\": !!inv_obj.r,\r\n            \"inv_s\": !!inv_obj.s,\r\n            \"inv_c\": !!inv_obj.c,\r\n            \"q\": q1 * 1\r\n        }\r\n        q1 = jk(obj);\r\n        ans.push(q1);\r\n    }\r\n    return ans;\r\n}\r\n","class JK_Trigger {\r\n\r\n    constructor() {\r\n        this.signal_c = \"\";\r\n        this.signal_j = \"\";\r\n        this.signal_k = \"\";\r\n        this.signal_r = \"\";\r\n        this.signal_s = \"\";\r\n        this.inv_C = true;\r\n        this.inv_R = true;\r\n        this.inv_S = true;\r\n        this.order = \"RCJKS\";\r\n        this.q = true;/*\r\n        this.pass_in = \"R\";\r\n        this.pass_val = 0;*/\r\n    }\r\n\r\n    generate(variant) {\r\n\r\n\r\n        this.signal_c = \"1010101010101010101010\";\r\n        this.signal_c = delete_from_signal(variant + 1 ** 3, this.signal_c);\r\n        this.signal_j = Rand_of_var(variant + 1 ** 2);\r\n        this.signal_k = Rand_of_var(variant + 2 ** 2);\r\n        //this.signal_r = Rand_of_var(variant + 3 ** 2);\r\n        //this.signal_s = Rand_of_var(variant + 4 ** 2);\r\n\r\n        let pos = [\"C\", \"J\", \"K\"];\r\n        this.order = \"\" + ((\"1\" === Rand_of_var(variant + 11 ** 2, 1)) ? \"R\" : \"S\");\r\n        let tmp = Number(Rand_of_var3(variant + 12 ** 2, 1));\r\n        this.order += pos[tmp];\r\n        pos.splice(tmp, 1);\r\n        tmp = Number(Rand_of_var(variant + 13 ** 2, 1));\r\n        this.order += pos[tmp];\r\n        pos.splice(tmp, 1);\r\n        this.order += pos[0];\r\n        this.order += ((\"0\" === Rand_of_var(variant + 11 ** 2, 1)) ? \"R\" : \"S\");\r\n\r\n        this.inv_C = \"1\" === Rand_of_var(variant + 5 ** 2, 1);\r\n        this.inv_R = \"1\" === Rand_of_var(variant + 6 ** 2, 1);\r\n        this.inv_S = \"1\" === Rand_of_var(variant + 7 ** 2, 1);\r\n        this.q = \"1\" === Rand_of_var(variant + 8 ** 2, 1);\r\n        let pass_in = (\"1\" === Rand_of_var(variant + 9 ** 2, 1)) ? \"R\" : \"S\";\r\n        //this.pass_val = Rand_of_var(variant + 10 ** 2, 1);\r\n\r\n        this.signal_r = \"\";\r\n        this.signal_s = \"\";\r\n        //let rand = Rand_of_var(variant + 15 ** 2, 1);\r\n        if (this.order[0] === \"R\") {\r\n            for (let i = 0; i < 19; i++) {\r\n                this.signal_r += ((this.inv_R) ? \"1\" : \"0\");\r\n                this.signal_s += (this.inv_S ? \"1\" : \"0\");\r\n            }\r\n            let rand = Math.floor(Math.abs(Math.sin(variant)) * 10000) % 5 + 3;\r\n            this.signal_s = this.signal_s.slice(0, rand) + ((this.signal_s[0] === \"1\") ? \"0000\" : \"1111\") + this.signal_s.slice(rand);\r\n            this.signal_s = this.signal_s.slice(0, 19);\r\n        } else {\r\n            for (let i = 0; i < 19; i++) {\r\n                this.signal_s += ((this.inv_S) ? \"1\" : \"0\");\r\n                this.signal_r += (this.inv_R ? \"1\" : \"0\");\r\n            }\r\n            let rand = Math.floor(Math.abs(Math.sin(variant)) * 10000) % 10 + 3;\r\n            this.signal_r = this.signal_r.slice(0, rand) + ((this.signal_r[0] === \"1\") ? \"0000\" : \"1111\") + this.signal_r.slice(rand);\r\n            this.signal_r = this.signal_r.slice(0, 19);\r\n        }\r\n    }\r\n\r\n\r\n}\r\nfunction delete_from_signal(variant, signal, n = 2, super_const = 3){\r\n    //СУПЕР КОНСТАНТА НЕСОСЕДНИХ ЭЛЕМЕНТОВ\r\n    let j = 0;\r\n    for (let i = 0; i < n; i++)\r\n    {\r\n        j += Math.floor(Math.abs(Math.sin(variant + 15 + 71 * i)) * 10000) % 5 + super_const;\r\n        signal = signal.slice(0, j) + signal.slice(j+1);\r\n    }\r\n\r\n    return signal;\r\n}\r\n/**\r\n * @return {string}\r\n */\r\nfunction Rand_of_var(variant, symbols = 19) {\r\n    let a = 0;\r\n    let signal = \"\";\r\n    for (let i = 0; i < symbols; i++) {\r\n        a += variant + i;\r\n        a = Math.abs(Math.sin(a)) * 10000;\r\n        signal += Math.floor(a) % 2 + \"\";\r\n    }\r\n    return signal;\r\n}\r\n\r\n/**\r\n * @return {string}\r\n */\r\nfunction Rand_of_var3(variant, symbols = 19) {\r\n    let a = 0;\r\n    let signal = \"\";\r\n    for (let i = 0; i < symbols; i++) {\r\n        a += variant + i;\r\n        a = Math.abs(Math.sin(a)) * 10000;\r\n        signal += Math.floor(a) % 3 + \"\";\r\n    }\r\n    return signal;\r\n}\r\n\r\n// Math.floor(Math.abs(Math.sin(variant)) * 10000);\r\n/*function sfc32(_a) {\r\n    a +=_a;\r\n    a = Math.abs(Math.sin(a)) * 10000;\r\n    return Math.floor(a);\r\n}*/\r\n/*\r\nfunction JCreg() {\r\n    return;\r\n}*/\r\n\r\nexport var JK_now = new JK_Trigger();\r\n","import React, {useState, useEffect} from 'react';\r\nimport \"./ResetBrowser.css\";\r\nimport \"./Test.css\";\r\nimport {draw_rect_signal, draw_JK} from \"./draw_functions.js\";\r\nimport {jk_array} from \"./jk.js\";\r\nimport {JK_now} from \"./generator.js\";\r\n\r\nconst Test = () => {\r\n    const [value, setValue] = useState(\"\");\r\n    const [answer, setAnswer] = useState(\"\");\r\n    const [variant, setVariant] = useState(Math.floor(Math.random()*100000));\r\n    const [variantMessage, setVariantMessage] = useState(\"\");\r\n    const DEBUG = false;\r\n\r\n    JK_now.generate(variant);\r\n//\r\n    const changeVariant = e => {\r\n        if (e.target.value.length < 16) {\r\n            if (e.target.value.indexOf(0) == 0) e.target.value = e.target.value.slice(1, e.target.value.length);\r\n            if (typeof e.target.value[0] === \"undefined\") e.target.value = 1;\r\n            JK_now.generate(e.target.value);\r\n            setVariant(e.target.value);\r\n            console.log(parseInt(jk_array(JK_now.signal_j, JK_now.signal_k, JK_now.signal_r, JK_now.signal_s, JK_now.signal_c, JK_now.q, {\"r\": JK_now.inv_R, \"c\": JK_now.inv_C, \"s\": JK_now.inv_S}).join(\"\"), 2).toString(16));\r\n        }\r\n    };\r\n\r\n    const changeValue = e => {\r\n        if (e.target.value.length < 7) setValue(e.target.value);\r\n    };\r\n    const submitAnswer = e => {\r\n        answer == parseInt(value, 16) ? setVariantMessage(\"ВЕРНО!\") : setVariantMessage(\"УВЫ!\");\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (DEBUG) {\r\n            setValue(answer.toString(16));\r\n        }\r\n        let cnv = document.querySelector(\"#cnv\");\r\n        cnv.width = cnv.parentNode.offsetWidth;\r\n        cnv.height = cnv.parentNode.offsetHeight;\r\n        let ctx = cnv.getContext(\"2d\");\r\n        let size = cnv.width * 0.825; // регулирует масштаб выводимых сигналов\r\n        JK_now.order = JK_now.order[0] + \"CJK\" + JK_now.order[4];\r\n        for (let i in JK_now.order) {\r\n            let sig = JK_now.order[i];\r\n            if (i * 1 === 0) {\r\n                ctx.fillText(JK_now[\"inv_\" + sig] * 1 + \" ->\", size + 10, 35.5 + i*35)\r\n                continue;\r\n            }\r\n            if (sig === \"C\") ctx.strokeStyle = \"#fff\";\r\n            let add_c = sig === \"C\"? size/19:0;\r\n            draw_rect_signal(ctx, 30.5 - add_c/2, 33.5 + i*40, size + add_c, 10, JK_now[\"signal_\" + sig.toLowerCase()]);\r\n            ctx.strokeStyle = \"#000\";\r\n\r\n        }\r\n        ctx.clearRect(0, 0, 30, 200);\r\n        ctx.clearRect(30.5 + size, 0, 50, 200);\r\n        draw_JK(ctx, size + 50.5, 10.5, 80, 200, 10, [JK_now.inv_S, JK_now.inv_C, JK_now.inv_R], JK_now.order);\r\n        ctx.beginPath(); // drawing dots\r\n        for (let i = 0; i < 19; i++) {\r\n            let cx = 30.5 + (i + 1) * size/19 - size/19/4;\r\n            let y1 =  60.5,\r\n                y2 = 212.5,\r\n                yT = 50.5;\r\n            ctx.moveTo(cx, y1);\r\n            ctx.arc(cx, y1, 2, 0, Math.PI * 2);\r\n            ctx.moveTo(cx, y2)\r\n            ctx.arc(cx, y2, 2, 0, Math.PI * 2);\r\n            ctx.fillText(\"ABCDEFGHIJKLMNOPQRS\"[i], cx, yT);\r\n        }\r\n        ctx.fill();\r\n        ctx.beginPath(); // drawing dashed lines\r\n        ctx.setLineDash([3, 2]);\r\n        for (let i = 15; i > 0; i -= 4) {\r\n            ctx.moveTo(30.5 + i * size/19 + size/19/4, 38.5);\r\n            ctx.lineTo(30.5 + i * size/19 + size/19/4, 208.5)\r\n        }\r\n        ctx.strokeStyle = \"#0004\";\r\n        ctx.stroke();\r\n        setAnswer(parseInt(jk_array(JK_now.signal_j, JK_now.signal_k, JK_now.signal_r, JK_now.signal_s, JK_now.signal_c, JK_now.q, {\"r\": JK_now.inv_R, \"c\": JK_now.inv_C, \"s\": JK_now.inv_S}).join(\"\"), 2));\r\n   });\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <div className=\"App-header\">\r\n                JK26.3\r\n            </div>\r\n            <div className=\"App-main\">\r\n                <div className=\"App-main-leftside\"></div>\r\n                <div className=\"App-main-content\">\r\n                    <div className=\"App-main-content-data\">\r\n                        <div className=\"App-main-content-signal\">\r\n\r\n                            <canvas id=\"cnv\" ></canvas>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"App-main-content-variant\">\r\n                        <div className=\"Variant\">\r\n                            <VariantForm\r\n                                variant={variant}\r\n                                changeVariant={changeVariant}\r\n                            />\r\n                        </div>\r\n                        <div className=\"Answer\">\r\n                           <AnswerForm\r\n                               answer={answer}\r\n                               changeValue={changeValue}\r\n                               value={value}\r\n                               submitAnswer={submitAnswer}\r\n                               />\r\n                        </div>\r\n                        <div className=\"VariantMessage\">\r\n                            <p>{variantMessage}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"App-main-content-description\">\r\n\r\n                        <p>В отмеченные моменты времени найдите 19 значений на выходе JK триггера при заданных временных диаграммах на входах C,J,K и R. Начальное значение Q&nbsp;=&nbsp;{JK_now.q * 1}. Ответ дайте в HEX коде.</p>\r\n                        <p>Пример ответа: 9DB94. Обратите внимание на тип входов S,R,C.</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"App-main-rightside\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst VariantForm = ({variant, changeVariant}) => (\r\n    <div className=\"VariantContent\">\r\n       <div><b>ВВЕДИ ВАРИАНТ!</b></div>\r\n        <input type=\"number\" value={variant} onChange={changeVariant} min=\"1\"/>\r\n    </div>\r\n);\r\n\r\nconst AnswerForm = ({answer, value, changeValue, submitAnswer}) => {\r\n    return (\r\n        <div className=\"AnswerForm\">\r\n            <input type=\"text\" value={value} onChange={changeValue} placeholder=\"Каков ответ?\"/>\r\n            <button onClick={submitAnswer}> Давай! </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst Signal = ({value}) => (\r\n    <div className=\"Signal\">{value}</div>\r\n);\r\n\r\nexport default Test;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Test from './Test';\n\nReactDOM.render(<Test />, document.getElementById('root'));\n"],"sourceRoot":""}